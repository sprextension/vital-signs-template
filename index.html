<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Vital Signs Formatter</title>
  <style>
    :root{
      --card-bg:#fff;
      --page-bg:#f4f6f8;
      --accent:#3498db;
      --accent-dark:#2980b9;
      --muted:#eef1f5;
      --text:#2c3e50;
    }

        body.dark {
      --card-bg: #1e1e1e;
      --page-bg: #121212;
      --accent: #3498db;
      --accent-dark: #2980b9;
      --muted: #2a2a2a;
      --text: #f4f4f4;
    }
    
      body.dark h2, 
      body.dark h3, 
      body.dark label {
        color: var(--text);
      }
      
      body.dark input, 
      body.dark select, 
      body.dark textarea {
        background: #2a2a2a;
        color: #f4f4f4;
        border: 1px solid #444;
    }
    
        body.dark pre {
          background: #2a2a2a;
          color: #f4f4f4;
        }
        
        body.dark .primary-button {
          background: var(--accent);
        }
        
        body.dark .copy-btn {
          background: #27ae60;
        }

    body{
      font-family: "Segoe UI", Roboto, Arial, sans-serif;
      background: var(--page-bg);
      margin:0;
      padding:20px;
      color:var(--text);
    }

    h2{ text-align:center; color:var(--text); margin-bottom:18px; }

    label{ font-weight:600; display:block; margin-top:10px; }

    /* form layout */
    .bed-container{
      background: var(--card-bg);
      padding:16px;
      border-radius:10px;
      box-shadow:0 2px 4px rgba(0,0,0,0.05);
      border:1px solid #ddd;
      margin-bottom:18px;
    }

    .bed-container h3{ margin:0 0 8px 0; color:#34495e; font-size:18px; }

    .checkbox-row{ display:flex; flex-wrap:wrap; gap:8px; margin:6px 0 12px 0; }

    /* default inputs full width, but some controls sized smaller via classes */
    input[type="text"], input[type="number"], select{
      width:100%;
      padding:10px;
      margin:6px 0 12px 0;
      border:1px solid #ccc;
      border-radius:6px;
      box-sizing:border-box;
      font-size:14px;
    }

    /* Clear Button */
    .template-row {
      display: flex;
      gap: 10px;
      align-items: center;
      margin-bottom: 12px;
    }
    
    .template-row select {
      flex: 1;
      padding: 8px;
    }

    .template-row button {
      padding: 8px 12px;
      font-size: 14px;
      border-radius: 6px;
      cursor: pointer;
    }

    /* Dark Mode */
    .top-right {
      position: absolute;
      top: 10px;
      right: 10px;
    }
    
    .top-right button {
      padding: 6px 12px;
      font-size: 14px;
      border-radius: 6px;
      cursor: pointer;
    }


    /* Template control sizing */
    .template-row{ display:flex; gap:8px; align-items:center; margin-top:6px; }
    .template-select{ width:160px; padding:6px; font-size:13px; }
    .small-btn{
      padding:6px 8px;
      font-size:13px;
      border-radius:6px;
      border:1px solid #ccc;
      background:#fff;
      cursor:pointer;
      min-width:40px;
    }
    .small-btn:active{ transform:translateY(1px); }

    /* primary action button */
    .primary-button{
      width:100%;
      padding:12px;
      font-size:16px;
      background:var(--accent);
      color:#fff;
      border:none;
      border-radius:6px;
      cursor:pointer;
      margin-top:10px;
    }
    .primary-button:hover{ background:var(--accent-dark); }

    /* Copy button near outputs */
    .copy-btn{
      padding:6px 8px;
      font-size:13px;
      border-radius:6px;
      border: none;
      background:#2ecc71;
      color:#fff;
      cursor:pointer;
      margin-bottom:8px;
    }

    pre{
      background:var(--muted);
      padding:12px;
      border-radius:8px;
      white-space:pre-wrap;
      overflow-x:auto;
      font-size:14px;
    }

    @media(min-width:600px){
      .bed-container, .primary-button, pre{ max-width:720px; margin:0 auto 18px auto; }
    }
  </style>
</head>
<body>

  <div class="top-right">
  <button onclick="toggleDarkMode()">üåô Dark Mode</button>
  <button id="sendBtn">Send to Bot</button>

</div>
  
  <h2>Vital Signs Formatter</h2>

  <label for="bedCount">How many beds are occupied?</label>
  <select id="bedCount" onchange="generateBedForms()">
    <option value="">Select...</option>
    <option value="1">1 bed</option><option value="2">2 beds</option><option value="3">3 beds</option>
    <option value="4">4 beds</option><option value="5">5 beds</option><option value="6">6 beds</option>
    <option value="7">7 beds</option><option value="8">8 beds</option><option value="9">9 beds</option>
    <option value="10">10 beds</option><option value="11">11 beds</option><option value="12">12 beds</option>
    <option value="13">13 beds</option><option value="14">14 beds</option>
  </select>

  <div id="bedsContainer"></div>

  <button onclick="generateAllMessages()">Generate All Messages</button>
  <button onclick="clearAllBeds()">Clear All Beds</button>
  

  <div id="output"></div>

  <script>
document.addEventListener("DOMContentLoaded", () => {
  const savedBedCount = localStorage.getItem("bedCount") || 1;
  document.getElementById("bedCountSelect").value = savedBedCount;
  generateBedForms(savedBedCount);
});

// Function to generate bed forms dynamically
function generateBedForms() {
  const count = document.getElementById("bedCount").value; // ‚Üê change here
  if (!count) return; // nothing selected

  for (let i = 1; i <= count; i++) {
    const bedDiv = document.createElement("div");
    bedDiv.className = "bed-form";
    bedDiv.innerHTML = `
      <h3>Bed ${i}</h3>
      <label>Patient: <input type="text" id="patient${i}" /></label>
      <label>BP Sys: <input type="number" id="bp_sys${i}" /></label>
      <label>BP Dia: <input type="number" id="bp_dia${i}" /></label>
      <label>HR: <input type="number" id="hr${i}" /></label>
      <label>RR: <input type="number" id="rr${i}" /></label>
      <label>MV: <input type="checkbox" id="mv${i}" /></label>
      <label>Temp: <input type="number" id="temp${i}" step="0.1"/></label>
      <label>SpO‚ÇÇ: <input type="number" id="spo2${i}" /></label>
      <label>Template:
        <select id="template${i}">
          <option value="">--Select--</option>
          <option value="normalAdult">Normal Adult</option>
          <option value="normalPedia">Normal Pedia</option>
          <option value="lowBP">Low BP</option>
          <option value="highBP">High BP</option>
        </select>
      </label>
      <button type="button" id="rerand${i}">Rerandomize</button>
      <button type="button" id="clear${i}">Clear</button>
      <hr/>
    `;
    container.appendChild(bedDiv);

    attachAutoSave(i);
  }

  localStorage.setItem("bedCount", count);
}

// Attach autosave and button functionality for each bed
function attachAutoSave(i) {
  const fields = ["patient", "bp_sys", "bp_dia", "hr", "rr", "mv", "temp", "spo2", "template"];
  fields.forEach(f => {
    const el = document.getElementById(f + i);
    if (!el) return;
    el.addEventListener("input", () => {
      if (el.type === "checkbox") {
        localStorage.setItem(f + i, el.checked);
      } else {
        localStorage.setItem(f + i, el.value);
      }
    });

    // Load saved value
    const saved = localStorage.getItem(f + i);
    if (saved !== null) {
      if (el.type === "checkbox") el.checked = saved === "true";
      else el.value = saved;
    }
  });

  // Clear button
  const clearBtn = document.getElementById("clear" + i);
  if (clearBtn) clearBtn.addEventListener("click", () => {
    fields.forEach(f => {
      const el = document.getElementById(f + i);
      if (!el) return;
      if (el.type === "checkbox") el.checked = false;
      else el.value = "";
      localStorage.removeItem(f + i);
    });
  });

  // Rerandomize button (example: random vitals)
  const rerandBtn = document.getElementById("rerand" + i);
  if (rerandBtn) rerandBtn.addEventListener("click", () => {
    document.getElementById("bp_sys" + i).value = randomBetween(90, 140);
    document.getElementById("bp_dia" + i).value = randomBetween(60, 90);
    document.getElementById("hr" + i).value = randomBetween(60, 120);
    document.getElementById("rr" + i).value = randomBetween(12, 24);
    document.getElementById("temp" + i).value = (Math.random() * 2 + 36).toFixed(1);
    document.getElementById("spo2" + i).value = randomBetween(95, 100);
  });
}

function randomBetween(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

// Copy all beds info to clipboard
function copyAllBeds() {
  const count = document.getElementById("bedCountSelect").value;
  let text = "";
  for (let i = 1; i <= count; i++) {
    text += `Bed ${i}:\n`;
    text += `Patient: ${document.getElementById("patient" + i).value}\n`;
    text += `BP: ${document.getElementById("bp_sys" + i).value}/${document.getElementById("bp_dia" + i).value}\n`;
    text += `HR: ${document.getElementById("hr" + i).value}\n`;
    text += `RR: ${document.getElementById("rr" + i).value}\n`;
    text += `MV: ${document.getElementById("mv" + i).checked}\n`;
    text += `Temp: ${document.getElementById("temp" + i).value}\n`;
    text += `SpO‚ÇÇ: ${document.getElementById("spo2" + i).value}\n`;
    text += `Template: ${document.getElementById("template" + i).value}\n\n`;
  }
  navigator.clipboard.writeText(text).then(() => alert("Copied to clipboard!"));
}
</script>
</body>
</html>







